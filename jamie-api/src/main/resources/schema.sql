--ALTER TABLE LIKING DROP CONSTRAINT FK_DEVELOPER;
--ALTER TABLE LIKING DROP CONSTRAINT FK_RESTAURANT;
--ALTER TABLE LIKING DROP CONSTRAINT UNIQUE_DEV_RES;

/*DROP TABLE IF EXISTS LIKING;
DROP TABLE IF EXISTS DEVELOPER;
DROP TABLE IF EXISTS RESTAURANT;

CREATE TABLE
    DEVELOPER
    (
        DEV_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        DEV_NAME VARCHAR(100) NOT NULL,
        DEV_USUALLY_JOINS INTEGER DEFAULT 1 NOT NULL,
        PRIMARY KEY (DEV_ID)
    );

CREATE TABLE
    RESTAURANT
    (
        RES_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        RES_NAME VARCHAR(100) NOT NULL,
        RES_DISTANCE INTEGER,
        PRIMARY KEY (RES_ID)
    );

CREATE TABLE
    LIKING
    (
        LIK_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        LIK_DEV_ID INTEGER NOT NULL,
        LIK_RES_ID INTEGER NOT NULL,
        LIK_VALUE INTEGER DEFAULT 0 NOT NULL,
        PRIMARY KEY (LIK_ID),
        CONSTRAINT FK_LIK_DEV FOREIGN KEY (LIK_DEV_ID) REFERENCES DEVELOPER(DEV_ID),
        CONSTRAINT FK_LIK_RES FOREIGN KEY (LIK_RES_ID) REFERENCES RESTAURANT(RES_ID),
        CONSTRAINT UNIQUE_DEV_RES UNIQUE (LIK_DEV_ID, LIK_RES_ID)
    );

CREATE TABLE
    HISTORY
    (
        HST_ID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
        HST_RES_ID INTEGER NOT NULL,
        HST_DATE DATE NOT NULL,
        PRIMARY KEY (HST_ID),
        CONSTRAINT FK_HST_RES FOREIGN KEY (HST_RES_ID) REFERENCES RESTAURANT(RES_ID),
        CONSTRAINT UNIQUE_HST UNIQUE (HST_DATE)
    );

CREATE TABLE
    HISTORY_DEVELOPER
    (
        HSD_HST_ID INTEGER NOT NULL,
        HSD_DEV_ID INTEGER NOT NULL,
        CONSTRAINT FK_HSD_HST FOREIGN KEY (HSD_HST_ID) REFERENCES HISTORY(HST_ID),
        CONSTRAINT FK_HSD_DEV FOREIGN KEY (HSD_DEV_ID) REFERENCES DEVELOPER(DEV_ID)
    );*/